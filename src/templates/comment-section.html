{% import 'form.html' as forms %}

{% set comments = data['comments'] %}

<div class="vbox padded">
    <h2>Comments ({{ comments | length }}):</h2>
   
    {# write comment box #}
    <div class="hbox">
        {{ forms.write_comment(data, limits) }}
    </div>

    <ul class="naked-list">
    {% for c in comments %}
        
        {# single comment #}
        <li><div class="vbox text-box">

            {# comment header #}
            <div class="hbox padded v-centered">
                <a href="/user/{{ c['uid'] }}">@{{ c['username'] }}</a>
                <p class="timestamp">{{ c['timestamp'] }}</p>
                {# If the logged in user is the author, a delete button will appear #}
                {% if (data['logged_in_user'] is not none) and
                    (data['logged_in_user']['uid'] == c['uid']) -%}
                    {{ forms.delete_comment(data, limits, c) }}
                {% endif %}
            </div>
            <p>{{ c['content'] }}</p>
        </div></li>
    {% endfor %}
    </ul>
</div>
