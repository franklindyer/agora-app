{% import 'form.html' as forms %}

{% extends 'base.html' %}

<h1>{% block title %}{{ data['title'] }}{% endblock %}</h1>

{% block content %}
{% set mine = (data['logged_in_user'] is not none) and
              (data['logged_in_user']['uid'] == data['owner']) %}
<div class="group">

    <h1>{{ data['title'] }}</h1>

    <div class="vbox padded">
        <div class="sub-info">
            <a class="author" href="/user/{{ data['owner'] }}">@{{ data['username'] }}</a>
            <p class="timestamp">{{ data['timestamp'] }}</p>
            
            {# If the logged in user is the author, an edit button will appear #}
            {% if mine %}
                {{ forms.edit_post_button(data) }}
            {% endif %}
        </div>

        <div class="post-box">
            {{ data['content'] | safe }}
        </div>

        <p class="sub-info">Reputation: {{ data['votes'] }}</p>
        {{ forms.post_voting_section(data) }}
        {% include "comment-section.html" %}
    </div>

</div>
{% endblock %}

